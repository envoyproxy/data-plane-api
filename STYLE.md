# API style guidelines

Generally follow guidance at https://cloud.google.com/apis/design/, in
particular for proto3 as described at
https://cloud.google.com/apis/design/proto3. In addition, the following
conventions should be followed:

* The API is primarily intended for machine generation and consumption. It is
  expected that the management server is responsible for mapping higher level
  configuration concepts to API responses. Similarly, static configuration
  fragments may be generated by templating tools, etc. The APIs and tools
  used to generate xDS configuration are beyond the scope of the definitions in
  this repository.

* Use [wrapped scalar
  types](https://github.com/google/protobuf/blob/master/src/google/protobuf/wrappers.proto)
  where there is a need for a default value that does not match the proto3
  default (0/false/""). This should not be done for fields where the proto3
  defaults make sense. All things being equal, pick appropriate logic, e.g.
  enable vs. disable for a `bool` field, such that the proto3 defaults work, but
  only where this doesn't result in API gymnastics.

* Prefer `oneof` selections to boolean overloads of fields, for example, prefer:

  ```proto
  oneof path_secifier {
    string simple_path = 1;
    string regex_path = 2;
  }
  ```

  to

  ```proto
  string path = 1;
  bool path_is_regex = 2;
  ```

  This is more efficient, extendable and self-describing.
